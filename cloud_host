-- this is the api used for oedze his cloud host

logFileDir = "/cloudDir/log"
accountsFile = "/cloudDir/accounts/"

function log(msg)
 print(msg)
 logFile = fs.open(logFileDir, "a")
 logFile.writeLine(msg)
 logFile.close()
end 
 
local function checkPass(user, pass)
 if not fs.exists(accountsFile..user) then
  return "no User"
 else
  passFile = fs.open(acountsFile..user.."/.userData", "r")
  realPass = passFile.readLine()
  if realPass == pass then
   return "correct"
  else
   return "wrong"
  end
 end
end

local function userLogin(loginID)
 rednet.send(loginID, "sendUser")
 id, userName = rednet.receive(0.5)
 if id == loginID and userName ~= nil then
  rednet.send(loginID, "sendPass")
  id , passWord = rednet.receive(0.5)
  if id == loginID and passWord ~= nil then
   status = checkPass( userName, passWord)
   return status
  else
   return "no reaction"
  end
 else
  return "no reaction"
 end
end  
 
